<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Giphy API</title>
</head>

<body>
<h1>All Things Buffalo - Some GIPHY fun!</h1>
  <div id="giphy-dump"></div>
  <div id="button-dump"></div>

 <!-- This form will be where users input data about the gif's -->
 <form id="giphy-form">
  <label for="giphy-input">Search for a GIPHY</label>
  <input type="text" id="giphy-input"><br>

  <!-- This button will trigger our AJAX call -->
  <input id="find-giphy" type="submit" value="Giphy Search">
</form>


  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script type="text/javascript">
  // Initial array of giphy buttons
  var giphys = ["Buffalo Bills", "Buffalo Sabres", "Winter is (Always) Coming", "Buffalo Wings", "Ice Fishing", "Curling"];
  console.log(giphys);

      // Function for dumping the JSON content for each button into the div
      function displayGiphyInfo() {

        var APIKey = "";
// Example queryURL for Giphy API:
    // var queryURL = "https://api.giphy.com/v1/gifs/random?api_key=dc6zaTOxFJmzC";
    // var queryURL = "https://api.giphy.com/v1/gifs/search?q=buffalo+wings&api_key=dc6zaTOxFJmzC&limit=1";

      // This GIPHY API sample code accomplishes the same as the AJAX method:
      var xhr = $.get("http://api.giphy.com/v1/gifs/search?q=buffalo+bills+football&rating=g&api_key=dc6zaTOxFJmzC&limit=1");
          xhr.done(function(data) { console.log("success got data", data); });
          var xhr = $.get("http://api.giphy.com/v1/gifs/search?q=buffalo+sabres+hockey&rating=g&api_key=dc6zaTOxFJmzC&limit=1");
          xhr.done(function(data) { console.log("success got data", data); });
          var xhr = $.get("http://api.giphy.com/v1/gifs/search?q=winter+is+coming&rating=g&api_key=dc6zaTOxFJmzC&limit=1");
          xhr.done(function(data) { console.log("success got data", data); });
          var xhr = $.get("http://api.giphy.com/v1/gifs/search?q=buffalo+wings&rating=g&api_key=dc6zaTOxFJmzC&limit=1");
          xhr.done(function(data) { console.log("success got data", data); });
          var xhr = $.get("http://api.giphy.com/v1/gifs/search?q=ice+fishing&rating=g&api_key=dc6zaTOxFJmzC&limit=1");
          xhr.done(function(data) { console.log("success got data", data); });
          var xhr = $.get("http://api.giphy.com/v1/gifs/search?q=curling&rating=g&api_key=dc6zaTOxFJmzC&limit=1");
          xhr.done(function(data) { console.log("success got data", data); });

      }

  $("#find-giphy").on("click", function(event) {
    // event.preventDefault() can be used to prevent an event's default behavior.
        // Here, it prevents the submit button from trying to submit a form when clicked
        event.preventDefault();

    // Check Stack: https://stackoverflow.com/questions/41620816/giphy-api-how-do-i-search-for-giphs
          // Create the variable for the form input
          var userInput = $('#giphy-input').val().trim();
          // Change the input to suit the API (ie change spaces to +)
              userInput = userInput.replace(/ /g, "+");
          // Create the Giphy API URL for the user input field
          var queryURL = 'http://api.giphy.com/v1/gifs/search?q=' + userInput + '&rating=g&api_key=dc6zaTOxFJmzC&limit=10';

            $.ajax({
              url: queryURL,
              method: 'GET'
            }).done(function(response) {
              console.log(response.data[1].rating);
              $("#giphy-dump").html("<h3> User Input: " +response.data[1].rating+ "</h3>");
              $("#giphy-dump").append("<h3> User Input: " +response.data[1].url+ "</h3>");
              // $("#dump").text(JSON.stringify(response.data[1]));
            });

        });
  
  
  </script>

</body>

</html>
